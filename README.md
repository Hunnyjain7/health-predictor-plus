# HealthPredictor Plus

Predictive Health Analysis Using Artificial Intelligence and Machine Learning

## Understanding the problem

1. There is a significant increase in chronic diseases and health conditions worldwide. Many health issues are diagnosed at a later stage, making treatment more complex and less effective.

2. Medical reports can be difficult for individuals to understand without professional help. Users need accessible and easy-to-understand explanations of their medical reports.

3. Most health systems are reactive, focusing on treatment rather than prevention. Emphasis on preventive measures can significantly reduce the risk of developing chronic diseases.

## Objective

- The primary objective of this project is to utilize the OpenAI API to predict potential future health issues based on detailed user data.
- By leveraging the capabilities of the AI, we aim to analyze individual health profiles, including gender, age, BMI, medical history, and hereditary diseases, to provide personalized health predictions and preventive measures.
- These measures will encompass customized diet plans and exercise routines designed to address and mitigate the identified health risks.
- Additionally, the project seeks to enhance user engagement by enabling the upload and analysis of medical reports. Users will be able to upload their medical documents, which the OpenAI API will analyze to provide detailed insights and relevant information.
- An interactive Q&A session will also be incorporated, allowing users to ask questions and receive informed responses generated by the AI.

## HealthPredictor Plus API

HealthPredictor Plus is a FastAPI-based application that allows users to upload health reports, get an analysis of the reports, and ask health-related questions based on the context of the reports. The application uses OpenAI's GPT-3.5-turbo model to provide detailed responses and analyses.

## Features

- **Upload Health Report**: Upload a PDF health report and extract its text content.
- **Ask Health-Related Questions**: Ask questions based on the uploaded health report context.
- **Get Report Analysis**: Get an analysis of the uploaded health report and summarize the key health concerns.

## Technology Stack

- **FastAPI**: For building the backend RESTful APIs.
- **Python**: The main programming language for the backend.
- **Redis**: For storing session data and context.
- **OpenAI**: For natural language processing and answering health-related questions.
- **Langchain**: For integrating the OpenAI models using the chaining of Prompt Template and LLMChain.

## Machine Learning

- **Scikit-learn**: For building and training machine learning models.
- **Pandas**: For data manipulation and analysis.

### Please Access the README.md for the ML setup and overview

- **Path**: `/health_prediction_model/README.md`

## Artificial Intelligence

### Overview of AI Implementation

- **Generative AI**:
  Predictions are integrated into the GPT model to answer health-related questions. \
  Uses OpenAI's GPT-4o model for generating detailed health predictions.

- **Prompt Engineering**:
  Employs prompt templates to guide the AI's response generation, ensuring context-aware and relevant outputs. \
  Custom prompts are used to tailor the AI's behavior for health-related queries.

- **Dynamic Health Report Analysis**:
  Extracts and analyzes text from uploaded PDF health reports using python library. \
  Provides a detailed summary and analysis of key health metrics and potential health risks.

- **AI-Powered Health Predictions**:
  Generates comprehensive health prediction reports, including preventive measures and potential future ailments. \
  Ensures predictions align with user-provided health metrics and avoids explicitly mentioning AI.

## Installation

### Prerequisites

- Python 3.7+
- Redis server
- OpenAI API key

### Setup

1. **Clone the repository:**

   ```bash
   git clone <repository-url>
   cd healthpredictor-plus/backend/
   ```

2. **Create a virtual environment:**

   ```bash
   python -m venv venv
   source venv/bin/activate  # On Windows use `venv\Scripts\activate`
   ```

3. **Install the dependencies:**

   ```bash
   pip install -r requirements.txt
   ```

4. **Create a `.env` file in the project root directory and add your OpenAI API key:**

   ```env
   OPENAI_API_KEY=your_openai_api_key
   ```

5. **Start your Redis server:**

   Follow the instructions for your operating system to install and start Redis. Typically, you can start Redis with:

   ```bash
   redis-server
   ```

6. **Run the FastAPI application:**

   ```bash
   python app.py
   ```

   The application will be available at `http://127.0.0.1:5000`.

7. **Access Swagger:**

   The swagger is available at `http://127.0.0.1:5000/docs`.

## Endpoints

### Upload Health Report

- **URL**: `/upload-report/`
- **Method**: `POST`
- **Description**: Upload a PDF health report and extract its text content.
- **Parameters**:
  - `file`: The PDF file to be uploaded.
- **Response**:
  - `session_id`: The unique session ID for the uploaded report.

### Ask Health-Related Question

- **URL**: `/ask-question/`
- **Method**: `POST`
- **Description**: Ask a question based on the uploaded health report context.
- **Parameters**:
  - `query`: The question to be asked.
  - `session_id`: The session ID received after uploading the report.
- **Response**:
  - `answer`: The answer to the question.

### Get Report Analysis

- **URL**: `/report-analysis/`
- **Method**: `GET`
- **Description**: Get an analysis of the uploaded health report and summarize the key health concerns.
- **Parameters**:
  - `session_id`: The session ID received after uploading the report.
- **Response**:
  - `analysis`: The analysis of the report.

## Example Usage

### Upload Report

```bash
curl -X POST "http://127.0.0.1:5000/upload-report/" -F "file=@path_to_your_report.pdf"
```

### Ask Question

```bash
curl -X POST "http://127.0.0.1:5000/ask-question/" -H "Content-Type: application/json" -d '{"query": "What are the main health concerns?", "session_id": "your_session_id"}'
```

### Get Report Analysis

```bash
curl -X GET "http://127.0.0.1:5000/report-analysis/?session_id=your_session_id"
```

## Contributing

1. **Fork the repository.**
2. **Create a new branch:**

   ```bash
   git checkout -b your-feature-branch
   ```

3. **Make your changes.**
4. **Commit your changes:**

   ```bash
   git commit -m 'Add some feature'
   ```

5. **Push to the branch:**

   ```bash
   git push origin your-feature-branch
   ```

6. **Create a pull request.**
